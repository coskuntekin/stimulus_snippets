<div class="highlight"><pre class="highlight erb"><code>  <span class="cp">&lt;%=</span> <span class="n">form_with</span><span class="p">(</span><span class="ss">model: </span><span class="p">[</span><span class="ss">:user</span><span class="p">,</span> <span class="n">profile</span><span class="p">],</span>
                <span class="ss">html: </span><span class="p">{</span> <span class="s1">'data-controller'</span><span class="p">:</span> <span class="s1">'avatar'</span><span class="p">,</span>
                        <span class="s1">'data-avatar-size-value'</span><span class="p">:</span> <span class="s1">'5000000'</span><span class="p">})</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="n">source_of_visual</span><span class="p">(</span><span class="n">profile</span><span class="p">.</span><span class="nf">avatar</span><span class="p">),</span> <span class="s1">'data-avatar-target'</span><span class="p">:</span> <span class="s2">"image"</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">file_field</span> <span class="ss">:avatar</span><span class="p">,</span>
                        <span class="ss">accept: </span><span class="s1">'.png, .jpg, .jpeg'</span><span class="p">,</span>
                        <span class="s1">'data-action'</span><span class="p">:</span> <span class="s1">'change-&gt;avatar#upload'</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">hidden</span> <span class="na">data-avatar-target=</span><span class="s">"message"</span><span class="nt">&gt;</span>
        Sorry! Your avatar size over than 5MB
      <span class="nt">&lt;/p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s1">'data-avatar-target'</span><span class="p">:</span> <span class="s2">"submit"</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>